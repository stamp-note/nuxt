import{_ as k}from"./Button.49833c57.js";import{_ as Y,l as C,Y as c,Z as O,k as r,$ as V,g as B,h as W,a0 as h,o as b,c as I,a as Z,a5 as G,a4 as S,a6 as y,b as p,a2 as w,s as z,J as T,av as P,aw as D,A as m,f as Q,a1 as N,w as _,S as j,V as R}from"./entry.4d290266.js";import{u as H,p as K,_ as X}from"./index.8b664761.js";import{_ as x}from"./default.vue.742f45c3.js";import"./nuxt-link.40409cbb.js";import"./ThemeBtn.vue.9db85d6c.js";import"./Icon.36a66495.js";import"./Card.f72b237b.js";const ee=C({components:{UIcon:k},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>c.ui.input.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:()=>c.ui.input.default.size,validator(e){return Object.keys(c.ui.input.size).includes(e)}},color:{type:String,default:()=>c.ui.input.default.color,validator(e){return[...c.ui.colors,...Object.keys(c.ui.input.color)].includes(e)}},variant:{type:String,default:()=>c.ui.input.default.variant,validator(e){return[...Object.keys(c.ui.input.variant),...Object.values(c.ui.input.color).flatMap(l=>Object.keys(l))].includes(e)}},ui:{type:Object,default:()=>c.ui.input}},emits:["update:modelValue","blur"],setup(e,{emit:l,slots:i}){const n=O(),a=r(()=>V({},e.ui,n.ui.input)),{emitFormBlur:u}=H(),s=B(null),d=()=>{var f;e.autofocus&&((f=s.value)==null||f.focus())},t=f=>{l("update:modelValue",f.target.value)},o=f=>{u(),l("blur",f)};W(()=>{setTimeout(()=>{d()},100)});const g=r(()=>{var $,E;const f=((E=($=a.value.color)==null?void 0:$[e.color])==null?void 0:E[e.variant])||a.value.variant[e.variant];return h(a.value.base,a.value.rounded,a.value.placeholder,a.value.size[e.size],e.padded?a.value.padding[e.size]:"p-0",f==null?void 0:f.replaceAll("{color}",e.color),(v.value||i.leading)&&a.value.leading.padding[e.size],(L.value||i.trailing)&&a.value.trailing.padding[e.size])}),v=r(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),L=r(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),q=r(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),U=r(()=>e.loading&&!v.value?e.loadingIcon:e.trailingIcon||e.icon),A=r(()=>h(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[e.size])),J=r(()=>h(a.value.icon.base,n.ui.colors.includes(e.color)&&a.value.icon.color.replaceAll("{color}",e.color),a.value.icon.size[e.size],e.loading&&"animate-spin")),F=r(()=>h(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[e.size])),M=r(()=>h(a.value.icon.base,n.ui.colors.includes(e.color)&&a.value.icon.color.replaceAll("{color}",e.color),a.value.icon.size[e.size],e.loading&&!v.value&&"animate-spin"));return{ui:a,input:s,isLeading:v,isTrailing:L,inputClass:g,leadingIconName:q,leadingIconClass:J,leadingWrapperIconClass:A,trailingIconName:U,trailingIconClass:M,trailingWrapperIconClass:F,onInput:t,onBlur:o}}}),ae=["id","name","value","type","required","placeholder","disabled"];function ne(e,l,i,n,a,u){const s=k;return b(),I("div",{class:y(e.ui.wrapper)},[Z("input",G({id:e.name,ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled||e.loading,class:["form-input",e.inputClass]},e.$attrs,{onInput:l[0]||(l[0]=(...d)=>e.onInput&&e.onInput(...d)),onBlur:l[1]||(l[1]=(...d)=>e.onBlur&&e.onBlur(...d))}),null,16,ae),S(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(b(),I("span",{key:0,class:y(e.leadingWrapperIconClass)},[S(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[p(s,{name:e.leadingIconName,class:y(e.leadingIconClass)},null,8,["name","class"])])],2)):w("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(b(),I("span",{key:1,class:y(e.trailingWrapperIconClass)},[S(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[p(s,{name:e.trailingIconName,class:y(e.trailingIconClass)},null,8,["name","class"])])],2)):w("",!0)],2)}const le=Y(ee,[["render",ne]]),te=C({props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(c.ui.formGroup.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},ui:{type:Object,default:()=>c.ui.formGroup}},setup(e,{slots:l}){const i=O(),n=r(()=>V({},e.ui,i.ui.formGroup));z("form-path",e.name);const a=T("form-errors",null),u=r(()=>{var t,o;return e.error&&typeof e.error=="string"?e.error:(o=(t=a==null?void 0:a.value)==null?void 0:t.find(g=>g.path===e.name))==null?void 0:o.message}),s=r(()=>P(l)),d=r(()=>s.value.map(t=>{var g;const o={};return u.value?(o.oldColor=(g=t.props)==null?void 0:g.color,o.color="red"):o.oldColor&&(o.color=o.oldColor),e.name&&(o.name=e.name),e.size&&(o.size=e.size),D(t,o)}));return()=>m("div",{class:[n.value.wrapper]},[e.label&&m("div",{class:[n.value.label.wrapper,n.value.size[e.size]]},[m("label",{for:e.name,class:[n.value.label.base,e.required&&n.value.label.required]},e.label),e.hint&&m("span",{class:[n.value.hint]},e.hint)]),e.description&&m("p",{class:[n.value.description,n.value.size[e.size]]},e.description),m("div",{class:[!!e.label&&n.value.container]},[...d.value,u.value?m("p",{class:[n.value.error,n.value.size[e.size]]},u.value):e.help?m("p",{class:[n.value.help,n.value.size[e.size]]},e.help):null])])}}),ie=C({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]}},setup(e,{slots:l,expose:i}){const n=Math.random().toString(36).substring(7),a=K(`form-${n}`);a.on(async t=>{if(t.type==="blur"){const o=u.value.filter(v=>v.path!==t.path),g=(await s()).filter(v=>v.path===t.path);u.value=o.concat(g)}});const u=B([]);z("form-errors",u),z("form-events",a);async function s(){let t=await e.validate(e.state);if(e.schema)if(se(e.schema))t=t.concat(await de(e.state,e.schema));else if(oe(e.schema))t=t.concat(await re(e.state,e.schema));else if(fe(e.schema))t=t.concat(await ge(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return t}async function d(){if(u.value=await s(),u.value.length>0)throw new Error(`Form validation failed: ${JSON.stringify(u.value,null,2)}`);return e.state}return i({validate:d}),()=>{var t;return m("form",(t=l.default)==null?void 0:t.call(l))}}});function oe(e){return e.validate&&e.__isYupSchema__}function ue(e){return e.inner!==void 0}async function re(e,l){try{return await l.validate(e,{abortEarly:!1}),[]}catch(i){if(ue(i))return i.inner.map(n=>({path:n.path??"",message:n.message}));throw i}}function se(e){return e.parse!==void 0}function ce(e){return e.issues!==void 0}async function de(e,l){try{return l.parse(e),[]}catch(i){if(ce(i))return i.issues.map(n=>({path:n.path.join("."),message:n.message}));throw i}}function fe(e){return e.validateAsync!==void 0&&e.id!==void 0}function me(e){return e.isJoi===!0}async function ge(e,l){try{return await l.validateAsync(e,{abortEarly:!1}),[]}catch(i){if(me(i))return i.details.map(n=>({path:n.path.join("."),message:n.message}));throw i}}const ve=Q({id:"user-coupon",state:()=>({userList:[{uId:1,name:"user1",couponList:[{cId:1,identification:{type:"question",params:{question:"question1",answer:"answer1"}}}]}]}),actions:{async loadUserCouponList(){this.userCouponList=JSON.parse(window.localStorage.getItem("userCouponList"))||[]},async saveUserCouponList(){window.localStorage.setItem("userCouponList",JSON.stringify(this.userCouponList))},async addUserCoupon(e){this.userCouponList.push(e),await this.saveUserCouponList()},async removeUserCoupon(e){this.userCouponList=this.userCouponList.filter(l=>l.id!==e.id),await this.saveUserCouponList()}}}),we=C({__name:"View",setup(e){ve();const l=B(null);return(i,n)=>{const a=le,u=te,s=X,d=ie,t=x;return b(),N(t,{"hide-footer":""},{default:_(()=>[p(d,{class:"m-4 flex flex-col gap-2"},{default:_(()=>[p(u,{label:"이름"},{default:_(()=>[p(a,{size:"xl",placeholder:"이름을 입력해주세요"})]),_:1}),p(u,{label:"본인 확인 설정"},{default:_(()=>[p(s,{modelValue:j(l),"onUpdate:modelValue":n[0]||(n[0]=o=>R(l)?l.value=o:null),size:"xl",placeholder:"질문을 선택해주세요",options:[{label:"직접입력하기",value:"custom"},{label:"태어난 고향이 어디인가요?",value:"birth_location"},{label:"생일이 언제인가요?",value:"birth_date"},{label:"가장 좋아하는 음식은 무엇인가요?",value:"favorite_food"},{label:"가장 좋아하는 색상은 무엇인가요?",value:"favorite_color"},{label:"가장 좋아하는 동물은 무엇인가요?",value:"favorite_animal"},{label:"가장 좋아하는 영화는 무엇인가요?",value:"favorite_movie"},{label:"가장 좋아하는 책은 무엇인가요?",value:"favorite_book"},{label:"가장 좋아하는 음악은 무엇인가요?",value:"favorite_music"},{label:"가장 좋아하는 스포츠는 무엇인가요?",value:"favorite_sports"}],uiMenu:{height:"h-[120px]"}},null,8,["modelValue"])]),_:1}),j(l).value==="custom"?(b(),N(a,{key:0,size:"xl",placeholder:"질문을 입력해주세요"})):w("",!0),p(a,{size:"xl",placeholder:"질문에 대한 답변을 입력해주세요"})]),_:1})]),_:1})}}});export{we as default};
