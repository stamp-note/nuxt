import{D as Q,E as I,N,q as r,c as y,e as Z,$ as T,ah as ee,a7 as j,a6 as _,r as te,A as $,ai as ne,ac as ae,af as V,ag as se,K as O,a1 as re,aj as oe,_ as x,k as b,l as E,ak as ie,al as W,am as le,s as D,an as ce}from"./entry.e0978246.js";import{m as F,a as ue,b as de,u as q}from"./dimensions.e027aea1.js";const A=Q("stamp",{state:()=>({stampLocationList:[]}),actions:{addStampLocation(e){this.stampLocationList.push(e)}}});function me(e){return{aspectStyles:y(()=>{const i=Number(e.aspectRatio);return i?{paddingBottom:String(1/i*100)+"%"}:void 0})}}const H=I({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...F(),...ue()},"VResponsive"),B=N()({name:"VResponsive",props:H(),setup(e,i){let{slots:o}=i;const{aspectStyles:t}=me(e),{dimensionStyles:c}=de(e);return q(()=>{var a;return r("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[c.value,e.style]},[r("div",{class:"v-responsive__sizer",style:t.value},null),(a=o.additional)==null?void 0:a.call(o),o.default&&r("div",{class:["v-responsive__content",e.contentClass]},[o.default()])])}),{}}}),ve=I({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),h=(e,i)=>{let{slots:o}=i;const{transition:t,disabled:c,...a}=e,{component:s=ee,...d}=typeof t=="object"?t:{};return Z(s,T(typeof t=="string"?{name:c?"":t}:d,a,{disabled:c}),o)};function fe(e,i){if(!j)return;const o=i.modifiers||{},t=i.value,{handler:c,options:a}=typeof t=="object"?t:{handler:t,options:{}},s=new IntersectionObserver(function(){var g;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],f=arguments.length>1?arguments[1]:void 0;const l=(g=e._observe)==null?void 0:g[i.instance.$.uid];if(!l)return;const m=d.some(p=>p.isIntersecting);c&&(!o.quiet||l.init)&&(!o.once||m||l.init)&&c(m,d,f),m&&o.once?M(e,i):l.init=!0},a);e._observe=Object(e._observe),e._observe[i.instance.$.uid]={init:!1,observer:s},s.observe(e)}function M(e,i){var t;const o=(t=e._observe)==null?void 0:t[i.instance.$.uid];o&&(o.observer.unobserve(e),delete e._observe[i.instance.$.uid])}const ge={mounted:fe,unmounted:M},_e=ge,pe=I({alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,...H(),...F(),...ve()},"VImg"),G=N()({name:"VImg",directives:{intersect:_e},props:pe(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,i){let{emit:o,slots:t}=i;const c=_(""),a=te(),s=_(e.eager?"loading":"idle"),d=_(),f=_(),l=y(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),m=y(()=>l.value.aspect||d.value/f.value||0);$(()=>e.src,()=>{g(s.value!=="idle")}),$(m,(n,u)=>{!n&&u&&a.value&&S(a.value)}),ne(()=>g());function g(n){if(!(e.eager&&n)&&!(j&&!n&&!e.eager)){if(s.value="loading",l.value.lazySrc){const u=new Image;u.src=l.value.lazySrc,S(u,null)}l.value.src&&ae(()=>{var u,v;if(o("loadstart",((u=a.value)==null?void 0:u.currentSrc)||l.value.src),(v=a.value)!=null&&v.complete){if(a.value.naturalWidth||z(),s.value==="error")return;m.value||S(a.value,null),p()}else m.value||S(a.value),k()})}}function p(){var n;k(),s.value="loaded",o("load",((n=a.value)==null?void 0:n.currentSrc)||l.value.src)}function z(){var n;s.value="error",o("error",((n=a.value)==null?void 0:n.currentSrc)||l.value.src)}function k(){const n=a.value;n&&(c.value=n.currentSrc||n.src)}let w=-1;function S(n){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const v=()=>{clearTimeout(w);const{naturalHeight:L,naturalWidth:P}=n;L||P?(d.value=P,f.value=L):!n.complete&&s.value==="loading"&&u!=null?w=window.setTimeout(v,u):(n.currentSrc.endsWith(".svg")||n.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,f.value=1)};v()}const R=y(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),U=()=>{var v;if(!l.value.src||s.value==="idle")return null;const n=r("img",{class:["v-img__img",R.value],src:l.value.src,srcset:l.value.srcset,alt:e.alt,sizes:e.sizes,ref:a,onLoad:p,onError:z},null),u=(v=t.sources)==null?void 0:v.call(t);return r(h,{transition:e.transition,appear:!0},{default:()=>[V(u?r("picture",{class:"v-img__picture"},[u,n]):n,[[oe,s.value==="loaded"]])]})},K=()=>r(h,{transition:e.transition},{default:()=>[l.value.lazySrc&&s.value!=="loaded"&&r("img",{class:["v-img__img","v-img__img--preload",R.value],src:l.value.lazySrc,alt:e.alt},null)]}),X=()=>t.placeholder?r(h,{transition:e.transition,appear:!0},{default:()=>[(s.value==="loading"||s.value==="error"&&!t.error)&&r("div",{class:"v-img__placeholder"},[t.placeholder()])]}):null,Y=()=>t.error?r(h,{transition:e.transition,appear:!0},{default:()=>[s.value==="error"&&r("div",{class:"v-img__error"},[t.error()])]}):null,J=()=>e.gradient?r("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,C=_(!1);{const n=$(m,u=>{u&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{C.value=!0})}),n())})}return q(()=>{const[n]=B.filterProps(e);return V(r(B,T({class:["v-img",{"v-img--booting":!C.value},e.class],style:[{width:re(e.width==="auto"?d.value:e.width)},e.style]},n,{aspectRatio:m.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>r(O,null,[r(U,null,null),r(K,null,null),r(J,null,null),r(X,null,null),r(Y,null,null)]),default:t.default}),[[se("intersect"),{handler:g,options:e.options},null,{once:!0}]])}),{currentSrc:c,image:a,state:s,naturalWidth:d,naturalHeight:f}}}),Se={setup(){return{store:A()}},data(){return{stamp:{image:"/coupons/stamp01.png"}}},computed:{stampLocationList(){return this.store.stampLocationList}}};function he(e,i,o,t,c,a){return b(!0),E(O,null,ie(a.stampLocationList,s=>(b(),W(G,{class:"position-absolute stamp-wrap",src:c.stamp.image,width:"50px",contain:"",style:le({left:s[0]+"px",top:s[1]+"px"})},null,8,["src","style"]))),256)}const ye=x(Se,[["render",he],["__scopeId","data-v-33330135"]]),be={setup(){return{store:A()}},data(){return{coupon:{image:"/coupons/coupon01.png"}}},methods:{onClick(e){this.store.addStampLocation([e.offsetX,e.offsetY])}}};function $e(e,i,o,t,c,a){return b(),E("div",null,[r(G,{class:"position-relative",src:c.coupon.image,onClick:a.onClick,width:"300px",contain:""},{default:D(()=>[ce(e.$slots,"default")]),_:3},8,["src","onClick"])])}const Ie=x(be,[["render",$e]]),xe={name:"card-test",setup(){}};function ze(e,i,o,t,c,a){const s=ye,d=Ie;return b(),W(d,null,{default:D(()=>[r(s)]),_:1})}const Re=x(xe,[["render",ze]]);export{Re as default};
